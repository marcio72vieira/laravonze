000 -   Para baixar o projeto via GIT:
        a) Clonar o projeto: / OU baixar o arquivo .zip
            marcio@marcio72:~/projetosdocker/laravonze$ git clone https://github.com/marcio72vieira/laravonze.git
        b) Criar o arquivo ".env" a partir do arquivo ".env.example" conforme os passos abaixo:
            1 - Entrar a pasta do projeto
                cd projetosdocker/laravonze
                cp ./.env.example .env
            2 - Fazer as alterações necessárias conforme descrito abaixo:
                1) APP_TIMEZONE=America/Sao_Paulo
                2) APP_LOCALE=pt-BR
                3) APP_PORT=8080
                4) FORWARD_DB_PORT=3307
                5) DB_DATABASE=laravonze
        c) Atualizar o projeto com as dependências necessárias
            marcio@marcio72:~/projetosdocker/laravonze$ composer update
        d) Levantar os containeres
            ./vendor/bin/sail up -d
        e) Gerar a chave da aplicação
            marcio@vaio:~/projetosdocker/laravonze$  ./vendor/bin/sail artisan key:generate
        f) Depois de ter criado e modificado o arquivo .env aplicar o comando abaixo:
            marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail composer dump-autoload
        g) Executar as migrations:
            marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan migrate
        h) Executar a aplicação
            http://localhost:8080




001 -   Para criar o projeto:
        a) Dentro da pasta de projetosdocker digitar:
            curl -s https://laravel.build/laravonze | bash
        b) No arquivo docker-compose.yml alterar conforme código abaixo:
            b.1) - '${APP_PORT:-8080}:80'
            b.2) - '${FORWARD_DB_PORT:-3307}:3306'
            b.3) - '${FORWARD_REDIS_PORT:-6380}:6379'
        c) Acrescentar no arquivo .env as variáveis, conforme abaixo:
            c.1) APP_TIMEZONE=America/Sao_Paulo
            c.2) APP_LOCALE=pt-BR
            c.3) APP_PORT=8080
            c.4) FORWARD_DB_PORT=3307
            c.5) DB_DATABASE=laravonze
        d) Na pasta do projeto digitar:
            d.1) ./vendor/bin/sail up -d
            d.2) ./vendor/bin/sail artisan migrate


002 -   Para executar o projeto:
        Com os "containers" levantados (./vendor/bin/sail up -d), na barra de navegação, digitar:
        http://localhost:8080

003 -   Para gerar uma chave para aplicação quando necessário. Com os "containers" levantados, dentro da pasta do projeto:
        marcio@vaio:~/projetosdocker/laravonze$  ./vendor/bin/sail artisan key:generate

004 -   Para instalar ou atualizar as dependências da aplicação:
        marcio@vaio:~/projetosdocker/laravonze$  ./vendor/bin/sail composer install OU composer update

005 -   Para ver as versões do PHP, MySQL, Composer, NPM e Node instaladas, digitar:
        marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail php -v
        marcio@vaio:~/projetosdocker/laravonze$ mysql --version
        marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail composer
        marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail npm -v
        marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail node -v

006- -  Criando seed
        a) ./vendor/bin/sail artisan make:seeder CourseSeeder
        b) Modificar o método run, da seeder criada na linha acima:
                public function run(): void
                {
                        // Só cria um curso, se não existir um curso com o nome já cadastrado
                        if(!Course::where('name','Curso de Laravel - T1')->first()){
                        Course::create([
                                'name' => 'Curso de Laravel - T1'
                        ]);
                        }

                        if(!Course::where('name','Curso de Laravel - T2')->first()){
                        Course::create([
                                'name' => 'Curso de Laravel - T2'
                        ]);
                        }
                }
        c) Acrescentar no arquivo: database/seeders/DatabaseSeeder.php, o trecho de código conforme abaixo:
                $this->call([
                        CourseSeeder::class,
                ]);
        d) Execute a seed com o comando abaixo:
                ./vendor/bin/sail artisan db:seed

007 -   Adicionando uma coluna a uma tabela existente
        a) Digitar o comando relacinado à cricção da coluna(s) na tabela desejada
           marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan make:migration alter_courses_add_price_table
        b) Digitar no corpo do método criado pelo comando acima o trecho de código a seguir:
                public function up(): void
                {
                        Schema::table('courses', function(Blueprint $table){
                                $table->float('price')->after('name')->default(0);
                        });
                }

                /**
                * Reverse the migrations.
                */
                public function down(): void
                {
                        Schema::table('courses', function(Blueprint $table){
                                $table->dropColumn('price');
                        });
                }
        c) Executar o comando migrate
           marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan migrate
        d) Alterar a seed referente á coluna com o novo campo Adicionando
                // Só cria um curso, se não existir um curso com o nome já cadastrado
                if(!Course::where('name','Curso de Laravel - T1')->first()){
                        Course::create([
                                'name' => 'Curso de Laravel - T1',
                                'price' => 197.43
                        ]);
                }

                if(!Course::where('name','Curso de Laravel - T2')->first()){
                        Course::create([
                                'name' => 'Curso de Laravel - T2',
                                'price' => 247.43
                        ]);
                }

008 -   Criando componente ANÔNIMO, ou seja, apenas com blade(view) sem uma class(controller) .
        a) Criar o componente confome comando abaixo: Será criado o arquivo: resources/views/components/alert.blade.php
                ./vendor/bin/sail artisan make:component alerts --view

        b) Copiar para o conteúdo do arquivo alert.blade.php os trechos de código abaixo, referente ás mensagem de alerts desejadas, conforme abaixo:
                {{-- Mensagens de sucesso --}}
                @if (session('success'))
                        <p style="background-color: green; color: white">
                                {{ session('success') }}
                        </p>
                @endif

                {{-- Mensagens de error --}}
                @if (session('error'))
                        <p style="background-color: red; color: white">
                                {{ session('error') }}
                        </p>
                @endif


                {{-- Mensagens de errors de validação --}}
                @if ($errors->any())
                        <span style="background-color: red; color: white">
                                @foreach ($errors->all() as $error)
                                {{ $error }}<br>
                                @endforeach
                        </span>
                @endif
        c) Acrescentar nas view index.blade; create.blade e edit.blade a tag abaixo:
                <x-alert>

009 -   Bengin, Commit e RollBack Transaction
        1 - Importar a classe correspondente
            use Illuminate\Support\Facades\DB;

        2 - Estrutura básica:

            Validar dados
            // Iniciar transação antes do try/catch
            DB::beginTransaction()
            try{
                    // Tentar SALVAR / ATUALIZAR / DELETAR os dados
                    // Em caso de sucesso
                    DB::commit()
                    ... mais alguma coisa (redirect etc...)
            } catch(Exception $e) {
                    // Em caso de falha na tentativa de SALVAR / ATUALIZAR / DELETAR os dados
                    DB::rollBacl()
                    ... mais alguma coisa (redirect etc...)
            }

010 -   Trabalhando com Logs
        Arquivo de configuração: /home/marcio/projetosdocker/laravonze/config/logging.php
        Especificação:
                single (único arquivo);
                daily (um arquivo para cada dia. Mais recomendado)
                info(fluxo normal do sistema)
        Alterar preferencialmente no arquivo .env
                LOG_CHANNEL=stack
                LOG_STACK=daily
                LOG_DAILY_DAYS=15
                LOG_DEPRECATIONS_CHANNEL=null
                LOG_LEVEL=debug
        Como o arquivo .env foi alterado, digitar o comando:
                marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail composer dump-autoload

011 -   Auditoria: Site oficial:
        a) Site oficial da dependência:
            https://laravel-auditing.com/guide/installation.html
        b) Instalar o pacote de auditoria do Laravel
            marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail composer require owen-it/laravel-auditing
        c) Publicar o pacote
            marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan vendor:publish --provider "OwenIt\Auditing\AuditingServiceProvider" --tag="config"
        d) Publicar as migrations da base de dados
            marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan vendor:publish --provider "OwenIt\Auditing\AuditingServiceProvider" --tag="migrations"
        e) Execuar a migration criada pela publicação da base de dados anterior
            marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan migrate
        f) Acrescentar as Models Course e Classe, o trecho de código conforme abaixo:
            ...
            use OwenIt\Auditing\Contracts\Auditable;

            class Course extends Model implements Auditable
            {
                use \OwenIt\Auditing\Auditable;
                use HasFactory;
            ...
        g) Limpar o cache de informações caso seja necessário
            marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan config:clear
        h) Depois de baixar o projeto via git para atualização Casa/Trabalho Trabalho/Casa, digitar:
            1) marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail composer update
            2) marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan migrate
            3) marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan config:clear





012 -   Integrando o Bootstrap no projeto
        1 - Abrir o site em: https://getbootstrap.com/
        2 - Na parte da documentação "Docs", acessar:
            VIA CDN
            a) Introduction > Quick start > 2. Include Bootstrap’s CSS and JS. > Copiar os links abaixo e colar no arquivo: resources/views/layouts/admin.blade.php, conforme abaixo, via cdn
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <meta http-equiv="X-UA-Compatible" content="ie=edge">
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
                    <title>Celke</title>
                </head>
                <body>

                    @yield('content')
                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

                </body>
                </html>
        3 - Na parte de documentação "Docs", acessar:
            VIA DOWNLOAD
            a) Compiled CSS and JS > Download (baixar o arquivo) > Descompactar os arquivos
            b) Criar a pasta public/css e copiar os arquivos abaixo, para esta pasta:
                bootstrap.min.css
                bootstrap.min.css.map
            b) Criar a pasta public/js e copiar os arquivos abaixo, para esta pasta:
                bootstrap.bundle.min.js
                bootstrap.bundle.min.js.map
            d) Alterar o arquivo: resources/views/layouts/admin.blade.php,, conforme abaixo:
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <meta http-equiv="X-UA-Compatible" content="ie=edge">
                    <link href="{{ asset('css/bootstrap.min.css') }}" rel="stylesheet">

                    <title>Celke</title>
                </head>
                <body>

                    @yield('content')

                    <script src="{{ asset('js/bootstrap.bundle.min.js') }}"></script>


                </body>
                </html>

013 -   Integrando SB admin e Font Awesome na aplicação
        a) Baixar o SBAdmin do site: https://startbootstrap.com/template/sb-admin
        b) Baixar o FontAwesome do site: https://fontawesome.com/download (versão 6 - free for web)
        c) Copiar para a pasta public/css/ os arquivos e renomeá-los se achar necessário styles_sbadmin.css
           styles.css (do sbadmin) e all.min.css (do fontawesome)
        d) Copiar para a pasta public/js os arquivos e renomeá-los se achar necessário scripts_sbadmin.js
           scripts.js(do sbadmin) e all.min.js (do fontawesome)
        e) Inlcuílos seus caminhos no arquivo: resources/views/layouts/admin.blade.php
        f) Para evitar o erro de carregamento do favicon no console, Copiar a pasta webfonts para a pasta /home/marcio/projetosdocker/laravonze/public.

014 -   Implementando a paginação
        a) Alterar o método boot na classe AppServiceProvider(/app/Providers/AppServiceProvider.php) como abaixo:

           use Illuminate\Pagination\Paginator;

           public function boot(): void
           {
                Paginator::useBootstrapFive();
           }

        b) Alterar o método index, dos controlleres, conforme abaixo:
           public function index()
           {
                $courses = Course::orderBy('name', 'ASC')->paginate(10);

                return view('courses.index', ['courses' => $courses]);
           }
        c) Inserir ma view correspondene(index.blade.php) o trecho de código abaixo:

           {{ $courses->links() }}

015 -   Como traduzir para o PORTUGUÊS
        a) Acessar site de tradução de linguagem em:
           https://github.com/lucascudo/laravel-pt-BR-localization
        b) Efeturar a sequência de comandos abaixo como descrito abaixo (sequẽncia encontrada na parte de baixo da página acessada):
           1 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan lang:publish
           2 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail composer require lucascudo/laravel-pt-br-localization --dev
           3 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan vendor:publish --tag=laravel-pt-br-localization
           4 - // Altere Linha 85 do arquivo config/app.php para:
               'locale' => 'pt_BR'
               // Para versões 11.x altere a linha 8 do arquivo .env
               APP_LOCALE=pt_BR
           5 - Efetuar os comandos abaixo:
               marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan config:clear
               marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail composer dump-autoload

016 -   Instalando uma versão específica do Node.js a partir do NVM direto do UBUNTU
        a) nvm install <number_version>. Exemplo: marcio@marcio72:~/projetosdocker/laravonze$ nvm install 20.16.0
        b) ver as versões do node, npm e nvm direto do UBUNTU. Exemplo: node -v; npm -v; nvm -v
        C) ver as versões do node e npm a partir da aplicação
           marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail node -v
           marcio@marcio72:~/projetosdocker/laravonze$ ./vendor/bin/sail npm -v

017 -   Incluir Bootstrap, CSS e JavaScript com Vite
        1) - Documentação do Vite: https://laravel.com/docs/11.x/vite#main-content
        2) - Seção: # Installing Node
        3) - Instalando as dependências Node(do frontEnd da aplicação atavés do NPM) com o comando abaixo:
             a) ./vendor/bin/sail npm install
             b) Obs: Será adicionado a pasta: node_modules
        4) - Acessar a página do Bootstrap Getting Started/Vite (menu lateral): https://getbootstrap.com/docs/5.3/getting-started/vite/
             a) comando para instalar o Framework Bootstrap (seção: Install Bootstrap)
                a.1) marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail npm i --save bootstrap @popperjs/core
             b) Será instalado o Framework Bootstrap na pasta node_modules, ou seja, será instalado a partir do NPM e não 
                copiando os códigos fontes (css e js) diretamente nas pastas public/css e public/js
        5) - Apagar os trechos de cóigos do arquivo: resources/views/layouts/admin.blade.php, REFERENTE AO BOOTSTRAP
             a) <link href="{{ asset('css/bootstrap.min.css') }}" rel="stylesheet">
                <script src="{{ asset('js/bootstrap.bundle.min.js') }}"></script>
        6) - Para instalar o Bootstrap, dentro da pasta: resources/js
             a) no arquivo resources/js/bootstrap.js, acrescentar o trecho de código importando o FrameWok Bootstrap como abaixo:
                import 'bootstrap';
                import axios from 'axios';
                window.axios = axios;
                window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
             b) no arquivo resources/views/layouts/admin.blade.php incluir o trecho de código como abaixo:
                @vite(['resources/js/app.js'])
        7) - Para instar os demais arquivos css (styles_sbadmin.css, stylesmrc_admin.css e all.min.css) via Vite, faça o seguinte:
             a) Apagar/renomear caso deseje, os arquivos da pasta public/css
                bootstrap.min.css; bootstrap.mins.css.map
             b) Apagar/renomear caso deseje, os arquivos da pasta public/js
                bootstrap.bundle.min.js; bootstrap.bundle.min.js.map
             c) Mover para o diretório: resources/css, os arquivos:
                styles_sbadmin.css, stylesmrc_admin.css
             d) Importar os arquivos movidos no arquivo:resources/css/css.app, conforme trecho de cógido abaixo:
                /* Importar o css do Layout SB ADMIN*/
                @import 'styles_sbadmin.css';
                
                /* Importar o css personalizado do Layout*/
                @import 'stylesmrc_admin.css';
             e) no arquivo resources/views/layouts/admin.blade.php incluir o trecho de código como abaixo:
                @vite(['resources/css/app.css', 'resources/js/app.js'])
        8) - Mover o arquivo scripts_sbadmin.js da pasta public/js para a pasta resources/js e importá-lo no arquivo resource/js/app.js conforme abaixo:
             

        9) - No arquivo vite.config, certifica-se que os arquivos app.js e app.css estão incluidos conforme o trecho de código a seguir:
             export default defineConfig({
                plugins: [
                        laravel({
                        input: ['resources/css/app.css', 'resources/js/app.js'],
                        refresh: true,
                        }),
                ],
             });
        
        10) -   A partir de agora, para executar a aplicação, é necessário executar o comando:
                a) Para desenvolvimento: marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail npm run dev
                b) Para produção: marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail npm run build

        11) -   Incluindo os ÍCONES FONTAWESOME
                a) Apagar/renomear os arquivos css e js referente aos ícones fontawesome das pastas public/css e public/js
                b) Ir para a página Fontawesome: https://fontawesome.com/start
                c) Escolher "react" na seção: Use Font Awesome with Your Preferred Syntax or Stack…
                d) Execute o comando sugerido no passo da página apresentada para a instalação das forntes, como abaixo:
                   marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail npm i --save @fortawesome/fontawesome-free
                e) Acrescentar no arquivo resource/css/app.css o trecho de código a seguir:
                   /* Importar as fontes de ícones do FontAwesome*/
                   @import '@fortawesome/fontawesome-free/css/all.css';
                f) Apagar do arquivo resources/views/layouts/admin.blade.php o trecho que importa os arquivos referente ao css e js dos ícones
                   apagar o trecho abaixo:
                   <link href="{{ asset('css/all.min.css') }}" rel="stylesheet">
                   <script src="{{ asset('js/all.min.js') }}"></script>
                g) Apagar/renomear a pasta public/webfonts


                




CMD01 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan migrate
CMD02 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan make:controller CourseController
CMD03 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan make:view courses/index
CMD04 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan make:model Course
CMD05 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan make:migration alter_courses_add_price_table
CMD06 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan migrate:rollback
CMD07 - marcio@vaio:~/projetosdocker/laravonze$ ./vendor/bin/sail artisan make:request CourseRequest




OBS01 - Os arquivos CSS e JS quando colocados dentro das pasta "resources/css e resources/js" não são visualizados pelo
        usuário final, mas se colocados na pasta public/css ou public/js os mesmos serão.

Ir para o GitHub
Criar um novo projeto: laravonze
Realizar a sequencia de comandos abaixo na pasta do projeto
marcio@vaio:~/projetosdocker/laravonze$ git init
marcio@vaio:~/projetosdocker/laravonze$ git remote add origin https://github.com/marcio72vieira/laravonze.git
marcio@vaio:~/projetosdocker/laravonze$ git status
marcio@vaio:~/projetosdocker/laravonze$ git add .
marcio@vaio:~/projetosdocker/laravonze$ git commit -m "Inicio do projeto com Laravel 11"
marcio@vaio:~/projetosdocker/laravonze$ git push origin master
    user:
    password:

OBS03 - COnfigurações para acessar banco com MySQL WorkBranch
        1 - Connection Name: CelkeLaravel11
        2 - Hostname: 127.0.0.1
        3 - Port: 3307
        4 - User Name: sail
        5 - Store in Keichain...: password
        6 - Default Schema: laravonze
        7 - Clicar no botão: Test Connection

OBS04 - Quando utilizar FormsRequest Para VALIDAR, acrescentar no corpo dos métodos Store e Update o trecho de código a
        a seguir, senão por algum motivo dá erro:
        // Validar o formulário
        // $request->validate(); -> Só esta linha dá ERRO
        $validated = $request->validated(); -> Com esta o ERRO é eliminado.

OBS05 - Para levantar os mesmos containers, ao invés de digitar docker up -d (que irá criar novos containers) digite: docker start $(docker ps -a -q)


token
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


Site para cálculo do Imposto de relacinado
https://sicalc.receita.economia.gov.br/sicalc/principal











